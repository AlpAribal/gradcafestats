# Download the page
table <- readHTMLTable(pageURL)
setwd("C:\\Users\\User.DESKTOP-KRQQ533\\Desktop\\GradCafe\\")
require(data.table)
require(RMySQL)
require(XML)
require(stringr)
source("getSubmissions.R")
getwd()
source("getSubmissions.R")
source("getSubmissions.R")
?list.files
list.files()
setwd("C:\\Users\\User.DESKTOP-KRQQ533\\Desktop\\GradCafe\\submissionTracker\\")
source("getSubmissions.R")
# Download the page
table <- readHTMLTable(pageURL)
# Construct the new page URL and log it
# Following line is here just for reference. Formerly, the code fetched results from ?q=a+, ?q=b+ and so on.
#pageURL <- paste0("http://thegradcafe.com/survey/index.php?q=", oneChar, "*&p=", pageNo, "&pp=250")
pageURL <- paste0('http://thegradcafe.com/survey/index.php?q=%28a*%7Cb*%7Cc*%7Cd*%7Ce*%7Cf*%7Cg*%7Ch*%7Ci*%7Cj*%7Ck*%7Cl*%7Cm*%7Cn*%7Co*%7Cp*%7Cq*%7Cr*%7Cs*%7Ct*%7Cu*%7Cv*%7Cw*%7Cx*%7Cy*%7Cz*%7C1*%7C2*%7C3*%7C4*%7C5*%7C6*%7C7*%7C8*%7C9*%7C0*%7C%28*%7C%29*%7C_*%29&t=a&o=&pp=250&p=',pageNo)
pageNo = 1
# Construct the new page URL and log it
# Following line is here just for reference. Formerly, the code fetched results from ?q=a+, ?q=b+ and so on.
#pageURL <- paste0("http://thegradcafe.com/survey/index.php?q=", oneChar, "*&p=", pageNo, "&pp=250")
pageURL <- paste0('http://thegradcafe.com/survey/index.php?q=%28a*%7Cb*%7Cc*%7Cd*%7Ce*%7Cf*%7Cg*%7Ch*%7Ci*%7Cj*%7Ck*%7Cl*%7Cm*%7Cn*%7Co*%7Cp*%7Cq*%7Cr*%7Cs*%7Ct*%7Cu*%7Cv*%7Cw*%7Cx*%7Cy*%7Cz*%7C1*%7C2*%7C3*%7C4*%7C5*%7C6*%7C7*%7C8*%7C9*%7C0*%7C%28*%7C%29*%7C_*%29&t=a&o=&pp=250&p=',pageNo)
# Download the page
table <- readHTMLTable(pageURL)
View(table)
table <- table[1]
View(table)
table[["my-table"]][["Institution"]]
table <- table[[1]]
View(table)
table <- table[-1]
View(table)
table <- table[-1]
View(table)
# Download the page
table <- readHTMLTable(pageURL)[[1]][-1,]
View(table)
# Download the page
timer <- Sys.time()
table <- readHTMLTable(pageURL)[[1]][-1,]
print(paste0('Download of page #', pageNo, ' is complete', ' (took ', Sys.time()-timer, ' seconds'))
?readHTMLTable
?rcurl
?download.file
require(RCurl)
View(table)
View(table)
table["Program (Season)"]
View(table)
?as.Date
as.Date(x='2 Jan 2018', format='%d %b %Y')
as.Date(x='2 Jan 2018', format='%d %B %Y')
as.Date(x='2 Oca 2018', format='%d %B %Y')
Sys.setlocale("LC_TIME", "C")
as.Date(x='2 Jan 2018', format='%d %B %Y')
# Date Added field
submissions["Date Added"] <- as.character(as.Date(submissions["Program (Season)"]))
submissions <- table
# Date Added field
submissions["Date Added"] <- as.character(as.Date(submissions["Program (Season)"]))
# Date Added field
submissions["Date Added"] <- as.character(as.Date(submissions["Date Added"]))
# Date Added field
submissions[,"Date Added"] <- as.character(as.Date(submissions[,"Date Added"]))
submissions[,"Date Added"]
submissions <- readHTMLTable(pageURL, colClasses = 'character')[[1]][-1,]
View(submissions)
# Date Added field
submissions[,"Date Added"] <- as.character(as.Date(submissions[,"Date Added"]))
as.Date(submissions[,"Date Added"])
submissions[,"Date Added"]
str(submissions)
?readHTMLTable
submissions <- readHTMLTable(pageURL, colClasses = 'character', stringsAsFactors = FALSE)[[1]][-1,]
View(submissions)
str(submissions)
# Date Added field
submissions[,"Date Added"] <- as.character(as.Date(submissions[,"Date Added"]))
as.Date(submissions[,"Date Added"]
)
# Date Added field
submissions[,"Date Added"] <- as.character(as.Date(submissions[,"Date Added"], format='%d %b %Y'))
View(submissions)
submissions <- readHTMLTable(pageURL)[[1]][-1,]
str(submissions)
# Date Added field
submissions[,"Date Added"] <- as.character(as.Date(submissions[,"Date Added"], format='%d %b %Y'))
View(submissions)
View(submissions)
# Seperate major, degree, and semester
regExp <- '^\s*(.*)\s*,\s*(.*)\s*\\((.\\d\\d|\\?)\\)$'
# Seperate major, degree, and semester
regExp <- '^\\s*(.*)\\s*,\\s*(.*)\\s*\\((.\\d\\d|\\?)\\)$'
prog <- str_match_all(submissions[, "Program (Season)"], regExp)
View(prog)
prog <- matrix(unlist(prog), ncol = 4, byrow = TRUE)[,-1]
View(prog)
colnames(prog) <- c("major", "degree", "sem")
# Seperate decision info
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
dec <- t(sapply(dec, function(x) {length(x) <- 4
as.character(x)
}))[,-1]
View(dec)
# Seperate decision info
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*)¦)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec <- t(sapply(dec, function(x) {length(x) <- 8
as.character(x)
}))[,-1]
View(dec)
# Seperate decision info
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*)¦)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)(?: Undergrad GPA: (.*))$'
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)(?: Undergrad GPA: (.*))$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*) (?: Undergrad GPA: (.*))$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*) (?: Undergrad GPA)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
View(submissions)
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
View(dec)
dec[[1]]
dec[[2]]
dec[[3]]
# Seperate decision info
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (.*)(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*)¦)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \d{4})(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*))$'
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*))$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad)$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad)?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*)¦)?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*)¦)?$'
dec[[1]]
dec[[3]]
dec <- t(sapply(dec, function(x) {length(x) <- 10
as.character(x)
}))[,-1]
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General (V/Q/W): (.*)/(.*)/(.*)GRE Subject: (.*))?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec <- t(sapply(dec, function(x) {length(x) <- 10
as.character(x)
}))[,-1]
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*))?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V/Q/W\\): (.*)/(.*)/(.*)GRE Subject: (.*)¦)?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (.*)¦)?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec <- t(sapply(dec, function(x) {length(x) <- 10
as.character(x)
}))[,-1]
View(dec)
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (.*))?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (.*)(?:&diams;|¦))?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
â™
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (.*)(?:&diams;|â™¦))?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
â™
dec[[3]]
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (.*)(?:&diams;|♦))?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
dec[[1]]
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (n\\/a|\\d*).*)?$'
dec <- str_match_all(submissions[, "Decision & Date"], regExp)
dec[[3]]
dec[[1]]
dec <- t(sapply(dec, function(x) {length(x) <- 9
as.character(x)
}))[,-1]
View(dec)
colnames(notif) <- c("notif_result", "notif_method", "notif_date", "gpa", "gre_v", "gre_q", "gre_w", "gre_subject")
# Seperate notification info
regExp <- '^(Accepted|Rejected|Wait listed|Interview|Other) via (Postal Service|Phone|E-mail|Website|Other) on (\\d\\d? .{3} \\d{4})(?: Undergrad GPA: (.*)GRE General \\(V\\/Q\\/W\\): (.*)\\/(.*)\\/(.*)GRE Subject: (n\\/a|\\d*).*)?$'
notif <- str_match_all(submissions[, "Decision & Date"], regExp)
notif <- t(sapply(notif, function(x) {length(x) <- 9
as.character(x)
}))[,-1]
colnames(notif) <- c("notif_result", "notif_method", "notif_date", "gpa", "gre_v", "gre_q", "gre_w", "gre_subject")
View(notif)
View(submissions)
notif[,"notif_date"] <- as.character(as.Date(notif[,"notif_date"], format='%d %b %Y'))
View(notif)
notif[notif[, "gre_subject"] == 'n/a', "gre_subject"] <- NA
View(notif)
notif[notif[, "gpa"] == 'n/a', "gre_subject"] <- NA
notif[notif[, "gre_v"] == 'n/a', "gre_subject"] <- NA
notif[notif[, "gre_q"] == 'n/a', "gre_subject"] <- NA
notif[notif[, "gre_w"] == 'n/a', "gre_subject"] <- NA
View(notif)
notif[notif[, "gpa"] == 'n/a', "gpa"] <- NA
notif[notif[, "gre_v"] == 'n/a', "gre_v"] <- NA
notif[notif[, "gre_q"] == 'n/a', "gre_q"] <- NA
notif[notif[, "gre_w"] == 'n/a', "gre_w"] <- NA
View(notif)
View(submissions)
